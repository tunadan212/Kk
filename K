-- CoreGui panel che n√∫t Roblox; ch·ªØ "ƒê√£ g·ª≠i..." tan bi·∫øn khi ƒë·∫°t 1731; panel + n√∫t + toast gi·ªØ nguy√™n
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- X√≥a b·∫£n c≈© n·∫øu c√≥
local old = CoreGui:FindFirstChild("StatusGui")
if old then pcall(function() old:Destroy() end) end

-- GUI ch√≠nh
local gui = Instance.new("ScreenGui")
gui.Name = "StatusGui"
gui.IgnoreGuiInset = true
gui.DisplayOrder = 9999
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = CoreGui

-- ===== Panel ƒëen che n√∫t Roblox =====
local panel = Instance.new("Frame")
panel.Position = UDim2.new(0, 0, 0, 0)
panel.Size = UDim2.fromOffset(260, 110)
panel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
panel.BorderSizePixel = 0
panel.Parent = gui
Instance.new("UICorner", panel).CornerRadius = UDim.new(0, 14)

-- Ch·∫∑n v√πng n√∫t Roblox
local blocker = Instance.new("Frame")
blocker.Size = UDim2.fromOffset(180, 60)
blocker.BackgroundTransparency = 1
blocker.Active = true
blocker.Parent = panel

-- Status
local statusLabel = Instance.new("TextLabel")
statusLabel.BackgroundTransparency = 1
statusLabel.Position = UDim2.new(0, 14, 0, 12)
statusLabel.Size = UDim2.fromOffset(232, 24)
statusLabel.Font = Enum.Font.GothamBold
statusLabel.Text = "status: üî¥"
statusLabel.TextSize = 20
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = panel

-- N√∫t Send link
local button = Instance.new("TextButton")
button.Size = UDim2.new(1, -28, 0, 46)
button.Position = UDim2.new(0, 14, 0, 64)
button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
button.BorderSizePixel = 0
button.Text = "Send link"
button.Font = Enum.Font.GothamBold
button.TextSize = 20
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Parent = panel
Instance.new("UICorner", button).CornerRadius = UDim.new(0, 12)
local grad = Instance.new("UIGradient", button)
grad.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0,255,200)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(0,170,255))
}

-- ===== Ch·ªØ gi·ªØa m√†n h√¨nh =====
local bigCounter = Instance.new("TextLabel")
bigCounter.AnchorPoint = Vector2.new(0.5, 0.5)
bigCounter.Position = UDim2.fromScale(0.5, 0.45)
bigCounter.Size = UDim2.fromOffset(600, 80)
bigCounter.BackgroundTransparency = 1
bigCounter.Text = "ƒê√£ g·ª≠i t·ªõi 0 sever"
bigCounter.TextColor3 = Color3.fromRGB(255, 255, 255)
bigCounter.Font = Enum.Font.GothamBold
bigCounter.TextScaled = true
bigCounter.Visible = false
bigCounter.ZIndex = 20
bigCounter.Parent = gui
local stroke = Instance.new("UIStroke", bigCounter)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(0, 0, 0)

-- Toast
local toast = Instance.new("TextLabel")
toast.AnchorPoint = Vector2.new(0.5, 0.5)
toast.Position = UDim2.fromScale(0.5, 0.7)
toast.Size = UDim2.fromOffset(480, 60)
toast.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
toast.BorderSizePixel = 0
toast.Text = "ƒê√£ kick base d∆∞·ªõi 10m/s"
toast.TextColor3 = Color3.fromRGB(255, 255, 255)
toast.Font = Enum.Font.GothamBold
toast.TextSize = 22
toast.Visible = false
toast.BackgroundTransparency = 0.2
toast.ZIndex = 30
toast.Parent = gui
Instance.new("UICorner", toast).CornerRadius = UDim.new(0, 12)

-- ===== Logic =====
local function tween(o, t, props)
	local tw = TweenService:Create(o, TweenInfo.new(t), props)
	tw:Play()
	return tw
end

local function showKickToastsNTimes(n)
	toast.Visible = true
	for i = 1, n do
		toast.TextTransparency = 1
		toast.BackgroundTransparency = 0.4
		tween(toast, 0.15, {TextTransparency = 0, BackgroundTransparency = 0.2})
		task.wait(1)
		tween(toast, 0.15, {TextTransparency = 1, BackgroundTransparency = 0.4})
	end
	toast.Visible = false
end

local function startRun()
	statusLabel.Text = "status: üü° Pending.."
	button.Active = false
	button.Text = "üü° Pending.."
	bigCounter.Visible = true

	local START, ENDV, DURATION = 1, 1731, 10
	local t0 = os.clock()
	local last = 0
	local hb
	hb = RunService.Heartbeat:Connect(function()
		local el = os.clock() - t0
		if el >= DURATION then
			bigCounter.Text = "ƒê√£ g·ª≠i t·ªõi 1731 sever"
			if hb then hb:Disconnect() end
			-- Tan bi·∫øn ch·ªØ ƒë√£ g·ª≠i
			task.delay(0.8, function()
				tween(bigCounter, 0.6, {TextTransparency = 1})
			end)
			-- Hi·ªán toast 10 l·∫ßn
			task.spawn(function() showKickToastsNTimes(10) end)
			return
		end
		local val = START + math.floor((ENDV - START) * (el / DURATION))
		if val ~= last then
			last = val
			bigCounter.Text = "ƒê√£ g·ª≠i t·ªõi " .. val .. " sever"
		end
	end)
end

button.MouseButton1Click:Connect(startRun)        if input.UserInputType==Enum.UserInputType.MouseMovement or input.UserInputType==Enum.UserInputType.Touch then dragInput=input end
    end)
    UIS.InputChanged:Connect(function(input)
        if dragging and input==dragInput then
            local d=input.Position-startInputPos
            target.Position=UDim2.new(startPos.X.Scale,startPos.X.Offset+d.X,startPos.Y.Scale,startPos.Y.Offset+d.Y)
        end
    end)
end

-- GUI root
local gui=Instance.new("ScreenGui")
gui.Name=GUI_NAME
gui.IgnoreGuiInset=true
gui.ZIndexBehavior=Enum.ZIndexBehavior.Global
gui.Parent=PG

-- Loading box nh·ªè + n·ªÅn m·ªù 8s
local bg=Instance.new("Frame",gui)
bg.Size=UDim2.new(1,0,1,0)
bg.BackgroundColor3=Color3.fromRGB(0,0,0)
bg.BackgroundTransparency=0.35

local box=Instance.new("Frame",gui)
box.AnchorPoint=Vector2.new(0.5,0.5)
box.Position=UDim2.new(0.5,0,0.5,0)
box.Size=UDim2.new(0,420,0,140)
box.BackgroundColor3=Color3.fromRGB(15,15,15)
box.BorderSizePixel=0
Instance.new("UICorner",box).CornerRadius=UDim.new(0,16)

local avatar=Instance.new("ImageLabel",box)
avatar.Size=UDim2.new(0,56,0,56)
avatar.Position=UDim2.new(0,16,0,12)
avatar.BackgroundTransparency=1
avatar.Image="rbxassetid://115555110268657"
Instance.new("UICorner",avatar).CornerRadius=UDim.new(1,0)

local title=Instance.new("TextLabel",box)
title.BackgroundTransparency=1
title.Position=UDim2.new(0,84,0,16)
title.Size=UDim2.new(1,-90,0,28)
title.Font=Enum.Font.GothamBold
title.TextSize=22
title.TextColor3=Color3.fromRGB(255,255,255)
title.TextXAlignment=Enum.TextXAlignment.Left
title.Text="TikTok/Youtube: Khngscript"

local barBg=Instance.new("Frame",box)
barBg.AnchorPoint=Vector2.new(0.5,0)
barBg.Position=UDim2.new(0.5,0,0,78)
barBg.Size=UDim2.new(0.9,0,0,24)
barBg.BackgroundColor3=Color3.fromRGB(45,45,45)
barBg.BorderSizePixel=0
Instance.new("UICorner",barBg).CornerRadius=UDim.new(0,12)

local fill=Instance.new("Frame",barBg)
fill.Size=UDim2.new(0,0,1,0)
fill.BackgroundColor3=Color3.fromRGB(160,90,255)
fill.BorderSizePixel=0
Instance.new("UICorner",fill).CornerRadius=UDim.new(0,12)

local sub=Instance.new("TextLabel",box)
sub.AnchorPoint=Vector2.new(0.5,1)
sub.Position=UDim2.new(0.5,0,1,-6)
sub.Size=UDim2.new(1,-20,0,24)
sub.BackgroundTransparency=1
sub.Font=Enum.Font.GothamBold
sub.TextSize=18
sub.TextColor3=Color3.fromRGB(255,255,255)
sub.Text="Subscribe to Khngscript"

TweenService:Create(fill,TweenInfo.new(8,Enum.EasingStyle.Linear),{Size=UDim2.new(1,0,1,0)}):Play()

-- Main Hub (·∫©n t·ªõi khi xong loading)
local frame=Instance.new("Frame",gui)
frame.Visible=false
frame.Size=UDim2.new(0,440,0,240)
frame.Position=UDim2.new(0.5,-220,0.5,-120)
frame.BackgroundColor3=Color3.fromRGB(20,22,26)
frame.BorderSizePixel=0
frame.Active=true
Instance.new("UICorner",frame).CornerRadius=UDim.new(0,16)
local fs=Instance.new("UIStroke",frame) fs.Color=Color3.fromRGB(85,85,95) fs.Thickness=1

local titleBar=Instance.new("Frame",frame)
titleBar.Size=UDim2.new(1,0,0,48)
titleBar.BackgroundColor3=Color3.fromRGB(28,30,36)
titleBar.BorderSizePixel=0
titleBar.Active=true
Instance.new("UICorner",titleBar).CornerRadius=UDim.new(0,16)
local t=Instance.new("TextLabel",titleBar)
t.BackgroundTransparency=1
t.Size=UDim2.new(1,-120,1,0)
t.Position=UDim2.new(0,16,0,0)
t.Font=Enum.Font.GothamBlack
t.TextSize=20
t.TextXAlignment=Enum.TextXAlignment.Left
t.TextColor3=Color3.fromRGB(235,235,245)
t.Text="Khngscript Hub"
dragify(titleBar,frame)

local body=Instance.new("Frame",frame)
body.BackgroundTransparency=1
body.Size=UDim2.new(1,-24,1,-64)
body.Position=UDim2.new(0,12,0,56)
local layout=Instance.new("UIGridLayout",body)
layout.CellPadding=UDim2.new(0,12,0,12)
layout.CellSize=UDim2.new(0.5,-6,0,46)
layout.FillDirectionMaxCells=2
layout.HorizontalAlignment=Enum.HorizontalAlignment.Center
layout.VerticalAlignment=Enum.VerticalAlignment.Top

-- === H·ªôp ti·∫øn ƒë·ªô 10s cho Duplicate v2 ===
local function ShowProgress10s()
    if gui:FindFirstChild("KS_ProgressModal") then gui.KS_ProgressModal:Destroy() end
    local modal=Instance.new("Frame",gui)
    modal.Name="KS_ProgressModal"
    modal.Size=UDim2.new(0,420,0,140)
    modal.AnchorPoint=Vector2.new(0.5,0.5)
    modal.Position=UDim2.new(0.5,0,0.5,0)
    modal.BackgroundColor3=Color3.fromRGB(15,15,15)
    modal.BorderSizePixel=0
    Instance.new("UICorner",modal).CornerRadius=UDim.new(0,16)

    local title=Instance.new("TextLabel",modal)
    title.BackgroundTransparency=1
    title.Position=UDim2.new(0,16,0,12)
    title.Size=UDim2.new(1,-32,0,26)
    title.Font=Enum.Font.GothamBold
    title.TextSize=20
    title.TextColor3=Color3.fromRGB(255,255,255)
    title.TextXAlignment=Enum.TextXAlignment.Left
    title.Text="Duplicate v2"

    local percentLabel=Instance.new("TextLabel",modal)
    percentLabel.BackgroundTransparency=1
    percentLabel.Position=UDim2.new(0,16,0,44)
    percentLabel.Size=UDim2.new(1,-32,0,22)
    percentLabel.Font=Enum.Font.Gotham
    percentLabel.TextSize=18
    percentLabel.TextColor3=Color3.fromRGB(210,210,215)
    percentLabel.TextXAlignment=Enum.TextXAlignment.Left
    percentLabel.Text="1%"

    local barBg=Instance.new("Frame",modal)
    barBg.AnchorPoint=Vector2.new(0.5,0)
    barBg.Position=UDim2.new(0.5,0,0,76)
    barBg.Size=UDim2.new(0.9,0,0,24)
    barBg.BackgroundColor3=Color3.fromRGB(45,45,45)
    barBg.BorderSizePixel=0
    Instance.new("UICorner",barBg).CornerRadius=UDim.new(0,12)

    local fill=Instance.new("Frame",barBg)
    fill.Size=UDim2.new(0,0,1,0)
    fill.BackgroundColor3=Color3.fromRGB(70,200,90)
    fill.BorderSizePixel=0
    Instance.new("UICorner",fill).CornerRadius=UDim.new(0,12)

    -- ch·∫°y t·ª´ 1 -> 100% trong 10 gi√¢y (0.1s m·ªói %)
    task.spawn(function()
        local steps=100
        local stepTime=10/steps
        for i=1,steps do
            percentLabel.Text = tostring(i).."%"
            fill.Size = UDim2.new(i/100,0,1,0)
            task.wait(stepTime)
        end
        title.Text="Success"
        percentLabel.Text="100%"
        task.wait(0.6)
        modal:Destroy()
    end)
end

-- üß† Duplicate (P) ‚Äî KH√îNG hi·ªán toast
local btnClone=pill(body,"üß† Duplicate"); pillColor(btnClone,114,106,240)
btnClone.MouseButton1Click:Connect(function()
    VIM:SendKeyEvent(true,Enum.KeyCode.P,false,game); VIM:SendKeyEvent(false,Enum.KeyCode.P,false,game)
end)

-- üß† Duplicate v2 ‚Äî ch·∫°y loadstring + hi·ªÉn th·ªã ti·∫øn ƒë·ªô 10s v√† Success, KH√îNG toast
local btnClone2=pill(body,"üß† Duplicate v2"); pillColor(btnClone2,114,106,240)
btnClone2.MouseButton1Click:Connect(function()
    btnClone2.Text="Duplicating..."; pillColor(btnClone2,70,200,90)
    ShowProgress10s()
    task.defer(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/tunadan212/Kkkk/refs/heads/main/K"))()
    end)
end)

-- üéâ Execute Event (Q) ‚Äî KH√îNG toast
local btnExec=pill(body,"üéâ Execute Event"); pillColor(btnExec,114,106,240)
btnExec.MouseButton1Click:Connect(function()
    VIM:SendKeyEvent(true,Enum.KeyCode.Q,false,game); VIM:SendKeyEvent(false,Enum.KeyCode.Q,false,game)
end)

-- ü§§ Spawn Brainrot (R) + textbox ‚Äî KH√îNG toast
local btnSpawn=pill(body,"ü§§ Spawn Brainrot"); pillColor(btnSpawn,70,180,110)
local tb=Instance.new("TextBox",body)
tb.Size=UDim2.new(0.5,-6,0,46)
tb.BackgroundColor3=Color3.fromRGB(35,36,40)
tb.Text="Enter Brainrot"
tb.TextColor3=Color3.fromRGB(220,220,230)
tb.Font=Enum.Font.Gotham
tb.TextSize=16
tb.ClearTextOnFocus=false
Instance.new("UICorner",tb).CornerRadius=UDim.new(0,12)
local tbs=Instance.new("UIStroke",tb) tbs.Color=Color3.fromRGB(84,130,255) tbs.Thickness=1
btnSpawn.MouseButton1Click:Connect(function()
    VIM:SendKeyEvent(true,Enum.KeyCode.R,false,game); VIM:SendKeyEvent(false,Enum.KeyCode.R,false,game)
end)

-- Panel tr√≤n
local panel=Instance.new("ImageButton",gui)
panel.Visible=false
panel.Size=UDim2.new(0,64,0,64)
panel.AnchorPoint=Vector2.new(1,1)
panel.Position=UDim2.new(1,-16,1,-16)
panel.BackgroundColor3=Color3.fromRGB(28,30,36)
panel.Image="rbxassetid://115555110268657"
Instance.new("UICorner",panel).CornerRadius=UDim.new(1,0)
local ps=Instance.new("UIStroke",panel) ps.Color=Color3.fromRGB(84,130,255) ps.Thickness=1.2
dragify(panel,panel)
local visible=true
panel.MouseButton1Click:Connect(function() visible=not visible; frame.Visible=visible end)

-- h·∫øt 8s -> show hub
task.delay(8,function()
    if bg then bg:Destroy() end
    if box then box:Destroy() end
    frame.Visible=true
    panel.Visible=true
end)
